<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../fontawesome-free-5.15.3-web/css/all.min.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
    <link href="../../css/auth.css" rel="stylesheet">

</head>
<body>
<main class="form-signin mt-5">
    <form method="post" action="auth/login" class="d-flex justify-content-center" id="loginForm">
        <div class="card" style="max-width: 800px">
            <div class="text-center intro">
                <img src="../../img/login-form.png" width="160">
            </div>
            <div class="mt-4 text-center">
                <h4>Log In.</h4> <span>Login with your admin credentials</span>
                <div class="mt-3 inputbox">
                    <input type="text" class="form-control" name="login" placeholder="login">
                    <i class="fa fa-user"></i>
                </div>
                <div class="inputbox">
                    <input type="password" class="form-control" name="password" placeholder="mot de passe"> <i
                        class="fa fa-lock"></i></div>
            </div>

            <div class="d-grid mt-2">
                <button id="loginBtn" class="btn btn-primary">
                    <span class="spinner-border d-none spinner-border-sm"></span>
                    Log In
                </button>
            </div>
        </div>
    </form>
</main>

<script src="../../js/jquery.js"></script>
<script src="../../js/moment.js"></script>
<script src="../../js/bootstrap.bundle.min.js"></script>
<script src="../../js/core.js"></script>
 <script>
     $(document).ready(function (){
         $("#loginBtn").on('click',function (){
             $("#loginForm .spinner-border").removeClass('d-none');
             $("#loginForm button").attr('disabled','disabled');
             $.ajax({
                 url:API_URL+"auth/login",
                 type:"post",
                 data:$("#loginForm").serialize(),
                 contentType:"application/x-www-form-urlencoded",
                 // beforeSend: function (xhr) {
                 //     xhr.setRequestHeader ("Authorization", "Bearer "+getUser().token);
                 // },
                 success:function (data){
                     console.log(data)
                     localStorage.setItem('user',JSON.stringify(data));
                     alert("success");

                 },
                 error:function (err){

                     console.log(err)
                 },
                 complete:function (){
                     $("#loginForm button").removeAttr('disabled');
                     $("#loginForm .spinner-border").addClass('d-none');
                 }
             })


         });
     })

 </script>
</body>
</html>